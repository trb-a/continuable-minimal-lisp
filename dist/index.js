parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Oxyk":[function(require,module,exports) {
module.exports=["do",["def","new",["fn",["a","&","b"],[".","Reflect",["`","construct"],"a","b"]]],["def","del",["fn",["a","b"],[".","Reflect",["`","deleteProperty"],"a","b"]]],["def","list",["fn",["&","a"],"a"]],["def",">=",["fn",["a","b"],["if",["<","a","b"],!1,!0]]],["def",">",["fn",["a","b"],["if",[">=","a","b"],["if",["=","a","b"],!1,!0],!1]]],["def","<=",["fn",["a","b"],["if",[">","a","b"],!1,!0]]],["def","classOf",["fn",["a"],[".",[".-",[".-","Object",["`","prototype"]],["`","toString"]],["`","call"],"a"]]],["def","not",["fn",["a"],["if","a",!1,!0]]],["def","null?",["fn",["a"],["=",null,"a"]]],["def","true?",["fn",["a"],["=",!0,"a"]]],["def","false?",["fn",["a"],["=",!1,"a"]]],["def","string?",["fn",["a"],["if",["=","a",null],!1,["=",["`","String"],[".-",[".-","a",["`","constructor"]],["`","name"]]]]]],["def","pr-str",["fn",["&","a"],[".",["map",[".-","JSON",["`","stringify"]],"a"],["`","join"],["`"," "]]]],["def","str",["fn",["&","a"],[".",["map",["fn",["x"],["if",["string?","x"],"x",[".","JSON",["`","stringify"],"x"]]],"a"],["`","join"],["`",""]]]],["def","prn",["fn",["&","a"],["do",[".","console",["`","log"],[".",["map",[".-","JSON",["`","stringify"]],"a"],["`","join"],["`"," "]]],null]]],["def","println",["fn",["&","a"],["do",[".","console",["`","log"],[".",["map",["fn",["x"],["if",["string?","x"],"x",[".","JSON",["`","stringify"],"x"]]],"a"],["`","join"],["`"," "]]],null]]],["def","list?",["fn",["a"],[".","Array",["`","isArray"],"a"]]],["def","contains?",["fn",["a","b"],[".","a",["`","hasOwnProperty"],"b"]]],["def","get",["fn",["a","b"],["if",["contains?","a","b"],[".-","a","b"],null]]],["def","set",["fn",["a","b","c"],["do",[".-","a","b","c"],"a"]]],["def","keys",["fn",["a"],[".","Object",["`","keys"],"a"]]],["def","vals",["fn",["a"],[".","Object",["`","values"],"a"]]],["def","cons",["fn",["a","b"],[".",["`",[]],["`","concat"],["list","a"],"b"]]],["def","concat",["fn",["&","a"],[".",[".-",["list"],["`","concat"]],["`","apply"],["list"],"a"]]],["def","nth","get"],["def","first",["fn",["a"],["if",[">",[".-","a",["`","length"]],0],["nth","a",0],null]]],["def","last",["fn",["a"],["nth","a",["-",[".-","a",["`","length"]],1]]]],["def","count",["fn",["a"],[".-","a",["`","length"]]]],["def","empty?",["fn",["a"],["if",["list?","a"],["=",0,[".-","a",["`","length"]]],["=","a",null]]]],["def","slice",["fn",["a","b","&","end"],[".","a",["`","slice"],"b",["if",[">",[".-","end",["`","length"]],0],["get","end",0],[".-","a",["`","length"]]]]]],["def","rest",["fn",["a"],["slice","a",1]]],["def","and",["~",["fn",["&","xs"],["if",["empty?","xs"],!0,["if",["=",1,[".-","xs",["`","length"]]],["first","xs"],["list",["`","let"],["list",["`","__and"],["first","xs"]],["list",["`","if"],["`","__and"],["concat",["`",["and"]],["rest","xs"]],["`","__and"]]]]]]]],["def","or",["~",["fn",["&","xs"],["if",["empty?","xs"],null,["if",["=",1,[".-","xs",["`","length"]]],["first","xs"],["list",["`","let"],["list",["`","__or"],["first","xs"]],["list",["`","if"],["`","__or"],["`","__or"],["concat",["`",["or"]],["rest","xs"]]]]]]]]],null];
},{}],"Tbsw":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=this&&this.__spreadArrays||function(){for(var e=0,n=0,r=arguments.length;n<r;n++)e+=arguments[n].length;var t=Array(e),o=0;for(n=0;n<r;n++)for(var a=arguments[n],u=0,i=a.length;u<i;u++,o++)t[o]=a[u];return t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TheGlobal=exports.Interpreter=exports.findEnv=exports.setEnv=exports.newEnv=exports.derefBOR=exports.newBOR=exports.isContinuation=exports.isApplicable=exports.isLambda=exports.isEnv=exports.isBOR=exports.cloneAST=exports.VERSION=exports.LANGUAGE=void 0,exports.LANGUAGE="Continuable-miniMAL-Lisp",exports.VERSION="0.0.1",exports.cloneAST=function(e,r){if(void 0===r&&(r=new Map),r.has(e))return r.get(e);if("object"===n(e)&&null!==e&&e.constructor===Object)return Object.keys(e).reduce(function(n,t){return n[t]=exports.cloneAST(e[t],r),n},{});if(e instanceof Array){var t=r.set(e,[]).get(e);return t.push.apply(t,e.map(function(e){return exports.cloneAST(e,r)})),t}return e};var t=function(e){throw e},o=function(e){return"string"==typeof e||t(e+" is not a symbol")},a=function(e){return"string"==typeof e||"symbol"===n(e)||"number"==typeof e||t("String(x) is not a property index")};exports.isBOR=function(e,r){return"object"===n(r)&&null!==r&&"string"==typeof r.bor&&r.bor in e};var u=function(e){return e instanceof Array},i=function(e){return u(e)||t(e+" is not an array")};exports.isEnv=function(e){return e instanceof Array&&"object"===n(e[0])&&null!==e[0]&&(e[1]instanceof Array||null===e[1])},exports.isLambda=function(e){return e instanceof Array&&(4===e.length&&"=>"===e[0]&&exports.isEnv(e[3])&&e[1]instanceof Array&&e[1].every(function(e){return"string"==typeof e})||2===e.length&&"=>"===e[0]&&l(e[1]))};var l=function(e){return"function"==typeof e};exports.isApplicable=function(e){return exports.isLambda(e)||l(e)||exports.isContinuation(e)};var s=function(e){return exports.isApplicable(e)||t(e+" is not a applicable")},f=function(e){return"object"===n(e)&&null!==e&&e.parent instanceof Array&&"number"==typeof e.index&&exports.isEnv(e.env)&&(null===e.flag||"string"==typeof e.flag)&&"object"===n(e.handler)};exports.isContinuation=function(e){return"object"===n(e)&&null!==e&&f(e.current)&&e.stack instanceof Array&&"string"==typeof e.version&&e.version.replace(/\.[^.]+$/,"")===exports.VERSION.replace(/\.[^.]+$/,"")};var v=function(e){return exports.isContinuation(e)||t(e+" is not a continuation")},c=function(e){return e instanceof Array&&3===e.length&&"fn"===e[0]&&e[1]instanceof Array&&e[1].every(function(e){return"string"==typeof e})},p=function(e){return c(e)||t(e+" is not a function or malformed")},d=function(e){return e instanceof Array&&"try"===e[0]&&e[2]instanceof Array&&"string"==typeof e[2][1]&&e[2].length>=3},g=function(e){return e instanceof Array&&"let"===e[0]&&e[1]instanceof Array&&e.length>=3};exports.newBOR=function(e,n){return n in e?{bor:n}:t(n+" is not a property of base object")},exports.derefBOR=function(e,n){return exports.isBOR(e,n)?e[n.bor]:n};var b=function(e,n){return n.map(function(n){return exports.derefBOR(e,n)})};exports.newEnv=function(e,n,r,t){void 0===t&&(t=!0);for(var o={},a=0;a<n.length;a++){if(t&&"&"===n[a]){o[""+n[a+1]]=r.slice(a);break}o[""+n[a]]=r[a]}return[o,e]},exports.setEnv=function(e,n,r){return e[0][""+n]=r},exports.findEnv=function(e,r,t){for(var o=e;o;o=o[1]){if(o[0].hasOwnProperty(t))return[o[0][t],!0,!1];if(!o[1]&&t in r&&null!==r[t]&&("object"===n(r[t])||"function"==typeof r[t]))return[exports.newBOR(r,t),!0,!0]}return[null,!1,!1]};var x=function(){return function(e){var n=this;this.stackMax=1/0,this.base=w,this.env=[{},null],this.loadCore=!0,this.debugCount=0,this.debugMode=!1,this.debugMax=1/0,this.debugFilter=function(){return!0},this.debug=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(n.debugMode&&n.debugFilter(e)&&(t=t.map(function(e){return e instanceof Array?exports.cloneAST(e):e}),console.log.apply(console,r([e],t)),n.debugCount++,n.debugCount>n.debugMax))throw new Error("too many debug message!")},this.evalAST=function(e,o){void 0===o&&(o=n.env);for(var a=[e],i=[{parent:a,index:0,env:o,flag:null,handler:null}],l=function(e){return i.length>=n.stackMax?t("Stack overflow"):(i.push(e),e)},s=function(){n.debug("Current eval-stack length, eval-stack",i.length,i);var e=i.pop(),o=e.parent,a=e.index,s=e.env,f=e.flag,v=e.handler,c=o[a];n.debug("Next evaluating AST node, environment, flag",c,s,f);try{if("string"==typeof c){var p=exports.findEnv(s,n.base,c),g=p[0],b=p[1];o[a]=b?g:t(c+" not found")}else if(u(c)){var x="string"==typeof c[0]?exports.derefBOR(n.base,exports.findEnv(s,n.base,c[0])[0]):null,w=(x instanceof Array&&"~"===x[0]?y:"string"==typeof c[0]&&A.hasOwnProperty(c[0])?A[c[0]]:exports.isContinuation(c[0])||exports.isContinuation(x)?m:h)({node:c,env:s,base:n.base,flag:f,handler:v,cont:{current:e,stack:i,lang:exports.LANGUAGE,version:exports.VERSION},debug:n.debug}),E=w.ret,O=w.subevals,S=w.reevals;null==S||S.reverse().forEach(function(e){var n,r,t,u,i;return l({parent:null!==(n=e.parent)&&void 0!==n?n:o,index:null!==(r=e.index)&&void 0!==r?r:a,env:null!==(t=e.env)&&void 0!==t?t:s,flag:null!==(u=e.flag)&&void 0!==u?u:null,handler:null!==(i=e.handler)&&void 0!==i?i:v})}),null==O||O.reverse().forEach(function(e){var n,r,t,u,i;return e&&l({parent:null!==(n=e.parent)&&void 0!==n?n:o,index:null!==(r=e.index)&&void 0!==r?r:a,env:null!==(t=e.env)&&void 0!==t?t:s,flag:null!==(u=e.flag)&&void 0!==u?u:null,handler:null!==(i=e.handler)&&void 0!==i?i:v})}),o[a]=E}}catch(C){if(exports.isContinuation(C))throw n.debug("Suspend",C),C;if(n.debug("Exception",C),!v)throw C;var N=v.parent[v.index];d(N);var R=N[2][1];exports.setEnv(v.env,R,C),i.splice.apply(i,r([0,i.length],i.filter(function(e){return e.handler!==v}))),l(v)}finally{n.debug("Evaluation Done. AST, environment",o[a],s)}};i.length;)s();return n.debug("Result",a[0]),a[0]},this.eval=function(e){return n.evalAST(e)},this.rep=function(e){try{return JSON.stringify(n.eval(JSON.parse(e)))}catch(r){if(r instanceof TypeError&&r.message.match(/(circular|cyclic)/i))return;throw r}},this.evalInBase=function(e){n.evalAST(e,[n.base,null])},Object.assign(this,e),this.loadCore&&this.evalInBase(require("./core.json"))}}();exports.Interpreter=x;var h=function(e){var n=e.node,t=e.env,o=e.base,a=e.flag;if(a){if("!"===a){var u=n.slice(1),i=exports.derefBOR(o,n[0]);if(l(i))return{ret:i.apply(void 0,b(o,u))};if(exports.isLambda(i)){if("function"==typeof i[1])return{ret:i[1](u)};var s=i[1],f=i[2],v=i[3];return{ret:f,reevals:[{env:exports.newEnv(v,s,u)}]}}throw String(i)+" is not applicable"}throw"Unexpedted flag "+a}var c=r(n);return{ret:c,reevals:[{flag:"!"}],subevals:c.map(function(e,n){return{parent:c,index:n,env:t}})}},y=function(e){var n=e.node,t=e.env,a=e.base;o(n[0]);var u=exports.derefBOR(a,exports.findEnv(t,a,n[0])[0]);return i(u),s(u[1]),{ret:r([u[1]],n.slice(1)),reevals:[{flag:"!"},{flag:null}]}},m=function(e){var n,t=e.node,o=e.flag,a=e.cont;if(o){var u=t[0],i=t.slice(1);v(u);var l=u.current,s=l.parent;s[l.index]=null!==(n=i[0])&&void 0!==n?n:null;var f=u.stack.length>0?u.stack[0].parent:s;if(1!==f.length)throw"Illeal root of continuation";var c=u.stack.map(function(e){return e.parent===f&&(e.parent=a.current.parent,e.index=a.current.index),e});return{ret:f[0],subevals:c.reverse()}}var p=r(t);return{ret:p,reevals:[{flag:"!"}],subevals:p.map(function(e,n){return{parent:p,index:n}})}},A={"`":function(e){return{ret:e.node[1]}},eval:function(e){var n=e.node;if(e.flag)return{ret:n[1],reevals:[{flag:null}]};var t=r(n);return{ret:t,reevals:[{flag:"!"}],subevals:[{parent:t,index:1}]}},def:function(e){var n=e.node,t=e.env;if(e.flag){var a=n[1],u=n[2],i=void 0===u?null:u;if("function"==typeof i)throw"Can't define JS function (Set it as property in the base object instead)";return o(a),{ret:exports.setEnv(t,a,i)}}var l=r(n);return{ret:l,reevals:[{flag:"!"}],subevals:[{parent:l,index:2}]}},"~":function(e){var n=e.node,t=e.flag,o=r(n);return t?(s(o[1]),{ret:o}):{ret:o,reevals:[{flag:"!"}],subevals:[{parent:o,index:1}]}},".-":function(e){var n=e.node,t=e.base;if(e.flag){var o=exports.derefBOR(t,n[1]);if(null==o)throw"Can't read/set property of null or undefined.";var u=b(t,n),i=u[2],l=u[3];return a(i),{ret:3===n.length?o[i]:o[i]=l}}var s=r(n);return{ret:s,reevals:[{flag:"!"}],subevals:s.map(function(e,n){return n>=1&&{parent:s,index:n}})}},".":function(e){var n=e.node,t=e.base;if(e.flag){var o=exports.derefBOR(t,n[1]);if(null==o)throw"Can't call method of null or undefined.";var u=n[2],i=n.slice(3);return a(u),"function"==typeof o[u]?{ret:o[u].apply(o,b(t,i))}:(s(o[u]),{ret:r([o[u]],i),reevals:[{flag:"!"}]})}var l=r(n);return{ret:l,reevals:[{flag:"!"}],subevals:l.map(function(e,n){return n>=1&&{parent:l,index:n}})}},oget:function(e){var n=e.node,t=e.base;if(e.flag){var o=exports.derefBOR(t,n[1]);if(null==o)throw"Can't read property of null or undefined.";var u=n[2];return a(u),{ret:o[u]}}var i=r(n);return{ret:i,reevals:[{flag:"!"}],subevals:i.map(function(e,n){return n>=1&&{parent:i,index:n}})}},oset:function(e){var n=e.node,t=e.base;if(e.flag){var o=exports.derefBOR(t,n[1]);if(null==o)throw"Can't set property of null or undefined.";var u=n[2],i=n[3];return a(u),{ret:o[u]=i}}var l=r(n);return{ret:l,reevals:[{flag:"!"}],subevals:l.map(function(e,n){return n>=1&&{parent:l,index:n}})}},try:function(e){var n=e.node,t=e.env,o=e.flag,a=e.cont,u=e.handler;if(d(n),o){if("!"===o)return{ret:n[1]};if("!!"===o)return{ret:n[2][2],reevals:[{}]};throw"Illegal status for try-catch."}var i={parent:a.current.parent,index:a.current.index,env:exports.newEnv(t,[],[]),flag:"!!",handler:u},l=r(n);return{ret:l,reevals:[{flag:"!",handler:i}],subevals:[{parent:l,index:1,handler:i}]}},fn:function(e){var n=e.node,r=e.env;return p(n),{ret:["=>",n[1],n[2],r]}},map:function(e){var n=e.node;if(e.flag){var t=n[1],o=n[2];i(o);var a=o.map(function(e,n){return[t,o[n]]});return{ret:a,subevals:a.map(function(e,n){return{parent:a,index:n,flag:"!"}})}}var u=r(n);return{ret:u,reevals:[{flag:"!"}],subevals:u.map(function(e,n){return n>=1&&{parent:u,index:n}})}},apply:function(e){var n=e.node;if(e.flag){var t=n[1],o=n.slice(2),a=o.pop();return i(a),o.push.apply(o,a),{ret:r([t],o),reevals:[{flag:"!"}]}}var u=r(n);return{ret:u,reevals:[{flag:"!"}],subevals:u.map(function(e,n){return n>=1&&{parent:u,index:n}})}},let:function(e){var n=e.node,t=e.env;g(n);var o=n[1],a=n[2];o.length%2==1&&o.push(null);var u=o.reduce(function(e,n,r){return r%2?e:e.concat([[o[r],o[r+1]]])},[]);return{ret:r(["do"],u.map(function(e){return["def",e[0],e[1]]}),[a]),reevals:[{env:exports.newEnv(t,[],[])}]}},do:function(e){var n=e.node.slice(1),r=n.slice(-1)[0];return{ret:void 0===r?null:r,reevals:[{flag:null}],subevals:n.slice(0,-1).map(function(e){return{parent:[e],index:0}})}},if:function(e){var n=e.node;if(e.flag)return{ret:n[1]?n[2]:n[3],reevals:[{flag:null}]};var t=r(n);return{ret:t,reevals:[{flag:"!"}],subevals:[{parent:t,index:1}]}},suspend:function(e){var n,t=e.node,o=e.flag,a=e.cont;if(o){var u=t.slice(1);throw a.info=null!==(n=u[0])&&void 0!==n?n:null,a}var i=r(t);return{ret:i,reevals:[{flag:"!"}],subevals:[{parent:i,index:1}]}},resume:function(e){var n=e.node,t=(e.flag,n[1]),o=n.slice(2);return v(t),{ret:r([t],o),reevals:[{flag:"!"}]}}};exports.TheGlobal=globalThis||window||e||this;var w=Object.assign(Object.create(exports.TheGlobal),{"=":function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e[0]===e[1]},"<":function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Number(e[0])<Number(e[1])},"+":function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Number(e[0])+Number(e[1])},"-":function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Number(e[0])-Number(e[1])},"*":function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Number(e[0])*Number(e[1])},"/":function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Number(e[0])/Number(e[1])},isa:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e[0]instanceof e[1]},type:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n(e[0])},new:function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((e=n[0]).bind.apply(e,n))},del:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return delete e[0][e[1]]},throw:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];throw e[0]},read:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return JSON.parse(e[0])},js:eval});exports.default=x;
},{"./core.json":"Oxyk"}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),t=this&&this.__exportStar||function(t,r){for(var i in t)"default"===i||r.hasOwnProperty(i)||e(r,t,i)};Object.defineProperty(exports,"__esModule",{value:!0}),t(require("./interpreter"),exports);
},{"./interpreter":"Tbsw"}]},{},["QCba"], null)
//# sourceMappingURL=/index.js.map