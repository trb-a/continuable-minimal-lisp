parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Oxyk":[function(require,module,exports) {
module.exports=["do",["def","new",["fn",["a","&","b"],[".","Reflect",["`","construct"],"a","b"]]],["def","del",["fn",["a","b"],[".","Reflect",["`","deleteProperty"],"a","b"]]],["def","list",["fn",["&","a"],"a"]],["def",">=",["fn",["a","b"],["if",["<","a","b"],!1,!0]]],["def",">",["fn",["a","b"],["if",[">=","a","b"],["if",["=","a","b"],!1,!0],!1]]],["def","<=",["fn",["a","b"],["if",[">","a","b"],!1,!0]]],["def","classOf",["fn",["a"],[".",[".-",[".-","Object",["`","prototype"]],["`","toString"]],["`","call"],"a"]]],["def","not",["fn",["a"],["if","a",!1,!0]]],["def","null?",["fn",["a"],["=",null,"a"]]],["def","true?",["fn",["a"],["=",!0,"a"]]],["def","false?",["fn",["a"],["=",!1,"a"]]],["def","string?",["fn",["a"],["if",["=","a",null],!1,["=",["`","String"],[".-",[".-","a",["`","constructor"]],["`","name"]]]]]],["def","pr-str",["fn",["&","a"],[".",["map",[".-","JSON",["`","stringify"]],"a"],["`","join"],["`"," "]]]],["def","str",["fn",["&","a"],[".",["map",["fn",["x"],["if",["string?","x"],"x",[".","JSON",["`","stringify"],"x"]]],"a"],["`","join"],["`",""]]]],["def","prn",["fn",["&","a"],["do",[".","console",["`","log"],[".",["map",[".-","JSON",["`","stringify"]],"a"],["`","join"],["`"," "]]],null]]],["def","println",["fn",["&","a"],["do",[".","console",["`","log"],[".",["map",["fn",["x"],["if",["string?","x"],"x",[".","JSON",["`","stringify"],"x"]]],"a"],["`","join"],["`"," "]]],null]]],["def","list?",["fn",["a"],[".","Array",["`","isArray"],"a"]]],["def","contains?",["fn",["a","b"],[".","a",["`","hasOwnProperty"],"b"]]],["def","get",["fn",["a","b"],["if",["contains?","a","b"],[".-","a","b"],null]]],["def","set",["fn",["a","b","c"],["do",[".-","a","b","c"],"a"]]],["def","keys",["fn",["a"],[".","Object",["`","keys"],"a"]]],["def","vals",["fn",["a"],[".","Object",["`","values"],"a"]]],["def","cons",["fn",["a","b"],[".",["`",[]],["`","concat"],["list","a"],"b"]]],["def","concat",["fn",["&","a"],[".",[".-",["list"],["`","concat"]],["`","apply"],["list"],"a"]]],["def","nth","get"],["def","first",["fn",["a"],["if",[">",[".-","a",["`","length"]],0],["nth","a",0],null]]],["def","last",["fn",["a"],["nth","a",["-",[".-","a",["`","length"]],1]]]],["def","count",["fn",["a"],[".-","a",["`","length"]]]],["def","empty?",["fn",["a"],["if",["list?","a"],["=",0,[".-","a",["`","length"]]],["=","a",null]]]],["def","slice",["fn",["a","b","&","end"],[".","a",["`","slice"],"b",["if",[">",[".-","end",["`","length"]],0],["get","end",0],[".-","a",["`","length"]]]]]],["def","rest",["fn",["a"],["slice","a",1]]],["def","and",["~",["fn",["&","xs"],["if",["empty?","xs"],!0,["if",["=",1,[".-","xs",["`","length"]]],["first","xs"],["list",["`","let"],["list",["`","__and"],["first","xs"]],["list",["`","if"],["`","__and"],["concat",["`",["and"]],["rest","xs"]],["`","__and"]]]]]]]],["def","or",["~",["fn",["&","xs"],["if",["empty?","xs"],null,["if",["=",1,[".-","xs",["`","length"]]],["first","xs"],["list",["`","let"],["list",["`","__or"],["first","xs"]],["list",["`","if"],["`","__or"],["`","__or"],["concat",["`",["or"]],["rest","xs"]]]]]]]]],null];
},{}],"Tbsw":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=this&&this.__spreadArrays||function(){for(var e=0,n=0,r=arguments.length;n<r;n++)e+=arguments[n].length;var t=Array(e),a=0;for(n=0;n<r;n++)for(var o=arguments[n],i=0,u=o.length;i<u;i++,a++)t[a]=o[i];return t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TheGlobal=exports.Interpreter=exports.findEnv=exports.setEnv=exports.newEnv=exports.isContinuation=exports.isApplicable=exports.isLambda=exports.isEnv=exports.isBOR=exports.cloneAST=exports.VERSION=exports.LANGUAGE=void 0,exports.LANGUAGE="Continuable-miniMAL-Lisp",exports.VERSION="0.2.1",exports.cloneAST=function(e,r){if(void 0===r&&(r=new Map),r.has(e))return r.get(e);if("object"===n(e)&&null!==e&&e.constructor===Object)return Object.keys(e).reduce(function(n,t){return n[t]=exports.cloneAST(e[t],r),n},{});if(e instanceof Array){var t=r.set(e,[]).get(e);return t.push.apply(t,e.map(function(e){return exports.cloneAST(e,r)})),t}return e};var t=function(e){throw e},a=function(e){"object"===n(e)&&null!==e&&Object.keys(e).filter(function(n){return void 0===e[n]}).forEach(function(n){return delete e[n]})},o=function(e){return"string"==typeof e||t(e+" is not a symbol")},i=function(e){return"string"==typeof e||"symbol"===n(e)||"number"==typeof e||t("String(x) is not a property index")};exports.isBOR=function(e,r){return"object"===n(r)&&null!==r&&"string"==typeof r.bor&&r.constructor===Object&&1===Object.keys(r).length&&r.bor in e};var u=function(e){return e instanceof Array},l=function(e){return u(e)||t(e+" is not an array")};exports.isEnv=function(e){return e instanceof Array&&"object"===n(e[0])&&null!==e[0]&&(e[1]instanceof Array||null===e[1])},exports.isLambda=function(e){return e instanceof Array&&"=>"===e[0]&&4===e.length&&exports.isEnv(e[3])&&e[1]instanceof Array&&e[1].every(function(e){return"string"==typeof e})};var s=function(e){return"function"==typeof e};exports.isApplicable=function(e){return exports.isLambda(e)||s(e)||exports.isContinuation(e)};var f=function(e){return exports.isApplicable(e)||t(e+" is not a applicable")},c=function(e){return"object"===n(e)&&null!==e&&e.parent instanceof Array&&"number"==typeof e.index&&exports.isEnv(e.env)&&(null===e.flag||"string"==typeof e.flag)&&"object"===n(e.handler)};exports.isContinuation=function(e){return"object"===n(e)&&null!==e&&c(e.current)&&e.stack instanceof Array&&"string"==typeof e.version&&e.version.replace(/\.[^.]+$/,"")===exports.VERSION.replace(/\.[^.]+$/,"")};var v=function(e){return exports.isContinuation(e)||t(e+" is not a continuation")},p=function(e){return e instanceof Array&&"fn"===e[0]&&3===e.length&&e[1]instanceof Array&&e[1].every(function(e){return"string"==typeof e})||t(e+" is not a fn form or malformed")},d=function(e){return e instanceof Array&&"try"===e[0]&&e[2]instanceof Array&&"string"==typeof e[2][1]&&e[2].length>=3||t(e+" is not a try form or malformed")},g=function(e){return e instanceof Array&&"let"===e[0]&&e[1]instanceof Array&&e.length>=3||t(e+" is not a let form or malformed")};exports.newEnv=function(e,n,r,t){void 0===t&&(t=!0);for(var a={},o=0;o<n.length;o++){if(t&&"&"===n[o]){a[""+n[o+1]]=r.slice(o);break}a[""+n[o]]=r[o]}return[a,e]},exports.setEnv=function(e,n,r){return e[0][""+n]=r},exports.findEnv=function(e,r,t){for(var a=e;a;a=a[1]){if(a[0].hasOwnProperty(t))return[a[0][t],!0,!1];if(!a[1]&&t in r&&null!==r[t]&&("object"===n(r[t])||"function"==typeof r[t]))return[{bor:t},!0,!0]}return[null,!1,!1]};var h=function(){return function(e){var n=this;this.stackMax=1/0,this.base=w,this.env=[{},null],this.loadCore=!0,this.debugCount=0,this.debugMode=!1,this.debugMax=1/0,this.debugFilter=function(){return!0},this.debug=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(n.debugMode&&n.debugFilter(e)&&(t=t.map(function(e){return e instanceof Array?exports.cloneAST(e):e}),console.log.apply(console,r([e],t)),n.debugCount++,n.debugCount>n.debugMax))throw new Error("too many debug message!")},this.evalAST=function(e,a){void 0===a&&(a=n.env);for(var o=[e],i=[{parent:o,index:0,env:a,flag:null,handler:null}],l=function(e){return i.length>=n.stackMax?t("Stack overflow"):(i.push(e),e)},s=function(){n.debug("Current eval-stack length, eval-stack: ",i.length,i);var e=i.pop(),a=e.parent,o=e.index,s=e.env,f=e.flag,c=e.handler,v=a[o];n.debug("Next evaluating AST node, environment, flag: ",v,s,f);try{if("string"==typeof v){var p=exports.findEnv(s,n.base,v),g=p[0],h=p[1];a[o]=h?g:t(v+" not found")}else if(u(v)){var w="string"==typeof v[0]?n.derefBOR(exports.findEnv(s,n.base,v[0])[0]):null,A=(w instanceof Array&&"~"===w[0]?x:"string"==typeof v[0]&&m.hasOwnProperty(v[0])?m[v[0]]:exports.isContinuation(v[0])||exports.isContinuation(w)?y:b)({node:v,env:s,base:n.base,flag:f,handler:c,cont:{current:e,stack:i,lang:exports.LANGUAGE,version:exports.VERSION},interpreter:n}),E=A.ret,O=A.subevals,S=A.reevals;null==S||S.reverse().forEach(function(e){var n,r,t,i,u;return l({parent:null!==(n=e.parent)&&void 0!==n?n:a,index:null!==(r=e.index)&&void 0!==r?r:o,env:null!==(t=e.env)&&void 0!==t?t:s,flag:null!==(i=e.flag)&&void 0!==i?i:null,handler:null!==(u=e.handler)&&void 0!==u?u:c})}),null==O||O.reverse().forEach(function(e){var n,r,t,i,u;return e&&l({parent:null!==(n=e.parent)&&void 0!==n?n:a,index:null!==(r=e.index)&&void 0!==r?r:o,env:null!==(t=e.env)&&void 0!==t?t:s,flag:null!==(i=e.flag)&&void 0!==i?i:null,handler:null!==(u=e.handler)&&void 0!==u?u:c})}),a[o]=E}}catch(j){if(exports.isContinuation(j))throw n.debug("Suspend. Continuation: ",j),j;if(n.debug("Caught an exception. Exception: ",j),!c)throw j;var C=c.parent[c.index];d(C);var N=C[2][1];exports.setEnv(c.env,N,j),i.splice.apply(i,r([0,i.length],i.filter(function(e){return e.handler!==c}))),l(c)}finally{n.debug("Evaluation Done. Node, environment: ",a[o],s)}};i.length;)s();return n.debug("Evaluatin finished. Result: ",o[0]),o[0]},this.eval=function(e){return n.evalAST(e)},this.rep=function(e){try{return JSON.stringify(n.eval(JSON.parse(e)))}catch(r){if(r instanceof TypeError&&r.message.match(/(circular|cyclic)/i))return;throw r}},this.resume=function(e,r){return n.evalAST(["resume",e,r])},this.evalInBase=function(e){n.evalAST(e,[n.base,null])},this.derefBOR=function(e){return exports.isBOR(n.base,e)?n.base[e.bor]:e},this.wrapLambda=function(e){return exports.isLambda(e)?function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return n.evalAST(r([["`",e]],t))}:e},a(e),Object.assign(this,e),this.loadCore&&this.evalInBase(require("./core.json"))}}();exports.Interpreter=h;var b=function(e){var n=e.node,t=e.env,a=(e.base,e.flag),o=e.interpreter,i=o.derefBOR(n[0]);if(!a&&!exports.isApplicable(i)){var u=r(n);return{ret:u,reevals:[{flag:"!"}],subevals:u.map(function(e,n){return{parent:u,index:n,env:t}})}}var l=n.slice(1);if(s(i))try{return{ret:i.apply(void 0,l.map(function(e){return o.wrapLambda(o.derefBOR(e))}))}}catch(v){if(exports.isContinuation(v))throw"Javascript function can not throw any continuation.";throw v}else{if(!exports.isLambda(i))throw String(i)+" is not applicable";var f=i[1],c=i[2],v=i[3];if("function"!=typeof c)return{ret:c,reevals:[{env:exports.newEnv(v,f,l)}]};try{return{ret:c.apply(void 0,l)}}catch(v){if(exports.isContinuation(v))throw"Javascript function can not throw any continuation.";throw v}}},x=function(e){var n=e.node,t=e.env,a=e.base,i=e.interpreter;o(n[0]);var u=i.derefBOR(exports.findEnv(t,a,n[0])[0]);return l(u),f(u[1]),{ret:r([u[1]],n.slice(1)),reevals:[{flag:"!"},{flag:null}]}},y=function(e){var n,t=e.node,a=e.flag,o=e.cont,i=t[0];if(a||exports.isApplicable(i)){var u=t.slice(1);v(i);var l=i.current,s=l.parent;s[l.index]=null!==(n=u[0])&&void 0!==n?n:null;var f=i.stack.length>0?i.stack[0].parent:s;if(1!==f.length)throw"Illeal root of continuation";var c=i.stack.map(function(e){return e.parent===f&&(e.parent=o.current.parent,e.index=o.current.index),e});return{ret:f[0],subevals:c.reverse()}}var p=r(t);return{ret:p,reevals:[{flag:"!"}],subevals:p.map(function(e,n){return{parent:p,index:n}})}},m={"`":function(e){return{ret:e.node[1]}},eval:function(e){var n=e.node;if(e.flag)return{ret:n[1],reevals:[{flag:null}]};var t=r(n);return{ret:t,reevals:[{flag:"!"}],subevals:[{parent:t,index:1}]}},def:function(e){var n=e.node,t=e.env;if(e.flag){var a=n[1],i=n[2],u=void 0===i?null:i;if("function"==typeof u)throw"Can't define JS function (Set it as property in the base object instead)";return o(a),{ret:exports.setEnv(t,a,u)}}var l=r(n);return{ret:l,reevals:[{flag:"!"}],subevals:[{parent:l,index:2}]}},"~":function(e){var n=e.node,t=e.flag,a=r(n);return t?(f(a[1]),{ret:a}):{ret:a,reevals:[{flag:"!"}],subevals:[{parent:a,index:1}]}},".-":function(e){var n=e.node,t=(e.base,e.flag),a=e.interpreter;if(t){var o=a.derefBOR(n[1]);if(null==o)throw"Can't read/set property of null or undefined.";var u=n.map(function(e){return a.derefBOR(e)}),l=u[2],s=u[3];return i(l),{ret:3===n.length?o[l]:o[l]=s}}var f=r(n);return{ret:f,reevals:[{flag:"!"}],subevals:f.map(function(e,n){return n>=1&&{parent:f,index:n}})}},".":function(e){var n=e.node,t=(e.base,e.flag),a=e.interpreter;if(!t){var o=r(n);return{ret:o,reevals:[{flag:"!"}],subevals:o.map(function(e,n){return n>=1&&{parent:o,index:n}})}}var u=a.derefBOR(n[1]);if(null==u)throw"Can't call method of null or undefined.";var l=n[2],s=n.slice(3);if(i(l),"function"!=typeof u[l])return f(u[l]),{ret:r([u[l]],s),reevals:[{flag:"!"}]};try{return{ret:u[l].apply(u,s.map(function(e){return a.wrapLambda(a.derefBOR(e))}))}}catch(c){if(exports.isContinuation(c))throw"Javascript methods can not throw any continuation.";throw c}},oget:function(e){var n=e.node,t=(e.base,e.flag),a=e.interpreter;if(t){var o=a.derefBOR(n[1]);if(null==o)throw"Can't read property of null or undefined.";var u=n[2];return i(u),{ret:o[u]}}var l=r(n);return{ret:l,reevals:[{flag:"!"}],subevals:l.map(function(e,n){return n>=1&&{parent:l,index:n}})}},oset:function(e){var n=e.node,t=(e.base,e.flag),a=e.interpreter;if(t){var o=a.derefBOR(n[1]);if(null==o)throw"Can't set property of null or undefined.";var u=n[2],l=n[3];return i(u),{ret:o[u]=l}}var s=r(n);return{ret:s,reevals:[{flag:"!"}],subevals:s.map(function(e,n){return n>=1&&{parent:s,index:n}})}},try:function(e){var n=e.node,t=e.env,a=e.flag,o=e.cont,i=e.handler;if(d(n),a){if("!"===a)return{ret:n[1]};if("!!"===a)return{ret:n[2][2],reevals:[{}]};throw"Illegal status for try-catch."}var u={parent:o.current.parent,index:o.current.index,env:exports.newEnv(t,[],[]),flag:"!!",handler:i},l=r(n);return{ret:l,reevals:[{flag:"!",handler:u}],subevals:[{parent:l,index:1,handler:u}]}},fn:function(e){var n=e.node,r=e.env;return p(n),{ret:["=>",n[1],n[2],r]}},map:function(e){var n=e.node;if(e.flag){var t=n[1],a=n[2];l(a);var o=a.map(function(e,n){return[t,a[n]]});return{ret:o,subevals:o.map(function(e,n){return{parent:o,index:n,flag:"!"}})}}var i=r(n);return{ret:i,reevals:[{flag:"!"}],subevals:i.map(function(e,n){return n>=1&&{parent:i,index:n}})}},apply:function(e){var n=e.node;if(e.flag){var t=n[1],a=n.slice(2),o=a.pop();return l(o),a.push.apply(a,o),{ret:r([t],a),reevals:[{flag:"!"}]}}var i=r(n);return{ret:i,reevals:[{flag:"!"}],subevals:i.map(function(e,n){return n>=1&&{parent:i,index:n}})}},let:function(e){var n=e.node,t=e.env;g(n);var a=n[1],o=n[2];a.length%2==1&&a.push(null);var i=a.reduce(function(e,n,r){return r%2?e:e.concat([[a[r],a[r+1]]])},[]);return{ret:r(["do"],i.map(function(e){return["def",e[0],e[1]]}),[o]),reevals:[{env:exports.newEnv(t,[],[])}]}},do:function(e){var n=e.node.slice(1),r=n.slice(-1)[0];return{ret:void 0===r?null:r,reevals:[{flag:null}],subevals:n.slice(0,-1).map(function(e){return{parent:[e],index:0}})}},if:function(e){var n=e.node;if(e.flag)return{ret:n[1]?n[2]:n[3],reevals:[{flag:null}]};var t=r(n);return{ret:t,reevals:[{flag:"!"}],subevals:[{parent:t,index:1}]}},suspend:function(e){var n,t=e.node,a=e.flag,o=e.cont;if(a){var i=t.slice(1);throw o.info=null!==(n=i[0])&&void 0!==n?n:null,o}var u=r(t);return{ret:u,reevals:[{flag:"!"}],subevals:[{parent:u,index:1}]}},resume:function(e){var n=e.node,t=(e.flag,n[1]),a=n.slice(2);return v(t),{ret:r([t],a),reevals:[{flag:"!"}]}}};exports.TheGlobal=globalThis||window||e||this;var w=Object.assign(Object.create(exports.TheGlobal),{"=":function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e[0]===e[1]},"<":function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Number(e[0])<Number(e[1])},"+":function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Number(e[0])+Number(e[1])},"-":function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Number(e[0])-Number(e[1])},"*":function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Number(e[0])*Number(e[1])},"/":function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Number(e[0])/Number(e[1])},isa:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e[0]instanceof e[1]},type:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n(e[0])},new:function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((e=n[0]).bind.apply(e,n))},del:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return delete e[0][e[1]]},throw:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];throw e[0]},read:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return JSON.parse(e[0])},js:eval});exports.default=h;
},{"./core.json":"Oxyk"}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),t=this&&this.__exportStar||function(t,r){for(var i in t)"default"===i||r.hasOwnProperty(i)||e(r,t,i)};Object.defineProperty(exports,"__esModule",{value:!0}),t(require("./interpreter"),exports);
},{"./interpreter":"Tbsw"}]},{},["QCba"], null)
//# sourceMappingURL=/index.js.map